
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="zh_CN">
  <head>
        <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>概述 &#8212; 善理对讲SDK alpha 文档</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜索" href="search.html" />
    <link rel="next" title="安装" href="csharp_activex.html" />
    <link rel="prev" title="1 概述" href="c_win.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="总目录"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="csharp_activex.html" title="安装"
             accesskey="N">下一页</a> |</li>
        <li class="right" >
          <a href="c_win.html" title="1 概述"
             accesskey="P">上一页</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">善理对讲SDK alpha 文档</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>概述<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h1>
<p>此 C# SDK 适用于.net framework&gt;2.0版本，基于 善理公版引擎 C++ API 构建。</p>
<div class="section" id="id2">
<h2>安装<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h2>
<ul class="simple">
<li>引用<code class="docutils literal notranslate"><span class="pre">ShanliTech.EChat.SDK.DLL</span></code> 到项目中。</li>
</ul>
<p><a href="#id3"><span class="problematic" id="id4">**</span></a>注意：SDK分为32位和64位，请根据引入的SDK设置为 <code class="docutils literal notranslate"><span class="pre">平台目标</span></code> **</p>
<div class="figure" id="id93">
<img alt="微信图片\_20180124184017" src="D:微信图片_20180124184017.png" />
<p class="caption"><span class="caption-text">微信图片_20180124184017</span></p>
</div>
<div class="section" id="id5">
<h3>文件目录<a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h3>
<div class="code ini highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|-</span><span class="n">eChat</span><span class="o">-</span><span class="n">CSharp</span><span class="o">-</span><span class="n">SDK_V1</span><span class="o">.</span><span class="mi">0</span>
 <span class="o">|---</span><span class="n">libs</span>
 <span class="o">|-----</span><span class="n">x86</span>
 <span class="o">|-------</span><span class="n">ShanliTech</span><span class="o">.</span><span class="n">EChat</span><span class="o">.</span><span class="n">SDK</span><span class="o">.</span><span class="n">dll</span>
 <span class="o">|-------</span><span class="n">amrcc</span><span class="o">.</span><span class="n">dll</span>
 <span class="o">|-------</span><span class="n">echat</span><span class="o">.</span><span class="n">dll</span>
 <span class="o">|-------</span><span class="n">echat</span><span class="o">.</span><span class="n">ini</span>
 <span class="o">|-------</span><span class="n">echat_log</span><span class="o">.</span><span class="n">dll</span>
 <span class="o">|-------</span><span class="n">evrcc</span><span class="o">.</span><span class="n">dll</span>
 <span class="o">|-------</span><span class="n">libscl</span><span class="o">.</span><span class="n">dll</span>
 <span class="o">|-------</span><span class="n">msvcp120d</span><span class="o">.</span><span class="n">dll</span>
 <span class="o">|-------</span><span class="n">msvcr120d</span><span class="o">.</span><span class="n">dll</span>
 <span class="o">|-------</span><span class="n">pthreadVSE2</span><span class="o">.</span><span class="n">dll</span>
 <span class="o">|-------</span><span class="n">vccorlib120d</span><span class="o">.</span><span class="n">dll</span>
 <span class="o">|-----</span><span class="n">x64</span>
</pre></div>
</div>
</div>
<div class="section" id="id6">
<h3>依赖库文件<a class="headerlink" href="#id6" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li>从文件夹lib拷贝关联的dll到bin目录下。</li>
</ul>
<p>NAudio.dll、amrcc.dll、echat.dll、echat.ini、echat_log.dll、evrcc.dll、libscl.dll、msvcp120d.dll、msvcr120d.dll、pthreadVSE2.dll、vccorlib120d.dll</p>
</div>
<div class="section" id="id7">
<h3>其他<a class="headerlink" href="#id7" title="永久链接至标题">¶</a></h3>
<p>C# SDK引用了第三方的开源项目
NAudio,因此，您需要在项目中引用它(可以使用NuGet管理dll)</p>
</div>
</div>
<div class="section" id="id8">
<h2>初始化<a class="headerlink" href="#id8" title="永久链接至标题">¶</a></h2>
<div class="section" id="id9">
<h3>初始化配置<a class="headerlink" href="#id9" title="永久链接至标题">¶</a></h3>
<ul>
<li><p class="first">传参返回值采用UTF-8编码</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">Context</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Dns</span></code> 配置，修改echat.ini文件：</p>
<div class="code ini highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">account</span><span class="p">]</span>
<span class="n">context</span> <span class="o">=</span> <span class="n">dev</span>
<span class="p">[</span><span class="n">network</span><span class="p">]</span>
<span class="n">dns</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">语音服务IP</span><span class="p">:</span><span class="n">端口</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="dll">
<h3>初始化DLL加载<a class="headerlink" href="#dll" title="永久链接至标题">¶</a></h3>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span>// 启动必须先完成初始化的工作，否则开发包无法正常运行
EChat.EChatApi.Init();

// 在退出前也需要对库进行释放
Chat.EChatApi.UnInit();

// 向外层发送错误通知，包括错误信息及错误码
EChat.Net.EChatApi.Instance.onError += Instance_onError;
private static void Instance_onError(string message, int error)
        {
            string result = string.Empty;
            switch (error)
            {
                case -1:
                    result = &quot;账号密码错误&quot;;
                    break;
                case -2:
                    result = &quot;账号已欠费或超出服务期&quot;;
                    break;
                case -3:
                    result = &quot;账号不存在&quot;;
                    break;
                case -4:
                    result = &quot;无效的账号登录权限&quot;;
                    break;
                case -10:
                    result = &quot;账号已在其它位置登录&quot;;
                    break;
                case -11:
                    result = &quot;账号登录超时&quot;;
                    break;
                case -20:
                    result = &quot;网络连接失败&quot;;
                    break;
                case -21:
                    result = &quot;网络正在重连&quot;;
                    break;
                case -30:
                    result = &quot;加入群组失败&quot;;
                    break;
                case -31:
                    result = &quot;加入群组请求超时&quot;;
                    break;
                case -40:
                    result = &quot;当前有人正在讲话&lt;服务器回馈&gt;&quot;;
                    break;
                case -41:
                    result = &quot;短时间内不允许多次抢麦&quot;;
                    break;
                case -42:
                    result = &quot;摇闭状态不允许抢麦&quot;;
                    break;
                case -43:
                    result = &quot;内部会话状态错误&lt;主动放麦后立马去抢麦&gt;&quot;;
                    break;
                case -44:
                    result = &quot;抢麦时申请音频焦点失败&quot;;
                    break;
                case -45:
                    result = &quot;已较低的优先级抢麦&lt;出现在当时正在有人讲话，自身比讲话人优先级低时&gt;&quot;;
                    break;
                   case -46:
                    result = &quot;网络不稳定&quot;;
                    break;
                case -50:
                    result = &quot;打开录音设备失败&quot;;
                    break;
            }
        }
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id10">
<h1>接口定义<a class="headerlink" href="#id10" title="永久链接至标题">¶</a></h1>
<div class="section" id="id11">
<h2>账号管理<a class="headerlink" href="#id11" title="永久链接至标题">¶</a></h2>
<div class="section" id="id12">
<h3>登录<a class="headerlink" href="#id12" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="nb">int</span> <span class="n">Login</span><span class="p">(</span><span class="n">string</span> <span class="n">account</span><span class="p">,</span> <span class="n">string</span> <span class="n">password</span><span class="p">,</span> <span class="nb">int</span> <span class="n">role</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>参数描述</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="54%" />
<col width="28%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">描述</th>
<th class="head">备注</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>account</td>
<td>用户名</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>password</td>
<td>明文密码</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>role</td>
<td>用户角色，0:对讲用户；3：调度员</td>
<td>调度台请使用 3</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first">返回值</p>
<blockquote>
<div><p>执行成功标示 0：成功 ，-1：失败</p>
</div></blockquote>
</li>
<li><p class="first">通知事件</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">onOnlineStatusChanged</span></code> ，当用户登录成功后触发，<code class="docutils literal notranslate"><span class="pre">OnlineStatus</span></code>
状态改为 <code class="docutils literal notranslate"><span class="pre">ONLINE_STATUS_ONLINE</span></code> 参考 <a class="reference external" href="#loginStatus">通知事件 -
登录状态改变通知</a></p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">OnError</span></code>，当用户登录失败时触发。参考 <a class="reference external" href="#init">配置及加载 -
初始化</a></p>
</li>
<li><p class="first">示例</p>
</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">创建用户管理对象</span>
<span class="n">var</span> <span class="n">accountManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">AccountManager</span><span class="p">;</span>
<span class="n">accountManager</span><span class="o">.</span><span class="n">onOnlineStatusChanged</span> <span class="o">+=</span> <span class="n">accountManager_onOnlineStatusChanged</span><span class="p">;</span>
<span class="n">accountManager</span><span class="o">.</span><span class="n">Login</span><span class="p">(</span><span class="s2">&quot;13800000009&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>

<span class="o">///</span> <span class="o">&lt;</span><span class="n">summary</span><span class="o">&gt;</span>
<span class="o">///</span>  <span class="n">用户登录成功的通知</span>
<span class="o">///</span> <span class="o">&lt;/</span><span class="n">summary</span><span class="o">&gt;</span>
<span class="o">///</span> <span class="o">&lt;</span><span class="n">param</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;status&quot;</span><span class="o">&gt;</span>
<span class="o">///</span> <span class="n">用户在线枚举</span> <span class="p">[]()</span>
<span class="o">///</span> <span class="o">&lt;/</span><span class="n">param</span><span class="o">&gt;</span>
<span class="n">private</span> <span class="n">void</span> <span class="n">accountManager_onOnlineStatusChanged</span><span class="p">(</span><span class="n">OnlineStatus</span> <span class="n">status</span><span class="p">){</span>
  <span class="k">if</span><span class="p">(</span><span class="n">status</span> <span class="o">==</span> <span class="n">Net</span><span class="o">.</span><span class="n">OnlineStatus</span><span class="o">.</span><span class="n">ONLINE_STATUS_ONLINE</span><span class="p">)</span>
  <span class="p">{</span>
      <span class="o">//</span><span class="n">登录成功</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id13">
<h3>注销<a class="headerlink" href="#id13" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">void</span> <span class="n">Logout</span><span class="p">();</span>
</pre></div>
</div>
<ul class="simple">
<li>参数</li>
</ul>
<p>无</p>
<ul class="simple">
<li>返回值</li>
</ul>
<p>无</p>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">accountManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">AccountManager</span><span class="p">;</span>
<span class="n">accountManager</span><span class="o">.</span><span class="n">Logout</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="id14">
<h3>账号信息查询<a class="headerlink" href="#id14" title="永久链接至标题">¶</a></h3>
<div class="section" id="id15">
<h4>获取用户信息<a class="headerlink" href="#id15" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">User</span> <span class="n">GetCurrentUser</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li>参数</li>
</ul>
<p>无</p>
<ul class="simple">
<li>返回值</li>
</ul>
<p>用户实体类 User 参考 <a class="reference external" href="#user">实体类定义 -&gt; 用户实体类</a></p>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">accountManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">AccountManager</span><span class="p">;</span>
<span class="n">var</span> <span class="n">user</span> <span class="o">=</span> <span class="n">accountManager</span><span class="o">.</span><span class="n">GetCurrentUser</span><span class="p">();</span>
</pre></div>
</div>
<p>​</p>
</div>
<div class="section" id="id16">
<h4>获取在线状态<a class="headerlink" href="#id16" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">OnlineStatus</span> <span class="n">GetOnlineStatus</span><span class="p">();</span>
</pre></div>
</div>
<ul class="simple">
<li>参数</li>
</ul>
<p>无</p>
<ul class="simple">
<li>返回值</li>
</ul>
<p>返回在线状态的枚举，参考： <a class="reference external" href="#onlineStatus">常用枚举 -&gt; 用户在线</a></p>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">accountManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">AccountManager</span><span class="p">;</span>
<span class="n">var</span> <span class="n">status</span> <span class="o">=</span> <span class="n">accountManager</span><span class="o">.</span><span class="n">GetOnlineStatus</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="uid">
<h4>获取当前账号UID<a class="headerlink" href="#uid" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="nb">int</span> <span class="n">GetUid</span><span class="p">();</span>
</pre></div>
</div>
<ul class="simple">
<li>参数</li>
</ul>
<p>无</p>
<ul class="simple">
<li>返回值</li>
</ul>
<p>返回当前登录用户的UID</p>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">accountManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">AccountManager</span><span class="p">;</span>
<span class="n">var</span> <span class="n">uid</span> <span class="o">=</span> <span class="n">accountManager</span><span class="o">.</span><span class="n">GetUid</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="id17">
<h4>获取用户名<a class="headerlink" href="#id17" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">string</span> <span class="n">GetName</span><span class="p">();</span>
</pre></div>
</div>
<ul class="simple">
<li>参数</li>
</ul>
<p>无</p>
<ul class="simple">
<li>返回值</li>
</ul>
<p>返回当前登录用户的中文名</p>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">accountManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">AccountManager</span><span class="p">;</span>
<span class="n">var</span> <span class="n">name</span> <span class="o">=</span> <span class="n">accountManager</span><span class="o">.</span><span class="n">GetName</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="id18">
<h4>是否被禁言状<a class="headerlink" href="#id18" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="nb">bool</span> <span class="n">HasAudioEnabled</span><span class="p">();</span>
</pre></div>
</div>
<ul class="simple">
<li>参数</li>
</ul>
<p>无</p>
<ul class="simple">
<li>返回值</li>
</ul>
<p>布尔类型， true：正常发言 ，false：被禁言。</p>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">accountManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">AccountManager</span><span class="p">;</span>
<span class="n">var</span> <span class="n">hasAudioEnabled</span> <span class="o">=</span> <span class="n">accountManager</span><span class="o">.</span><span class="n">HasAudioEnabled</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id19">
<h3>更改账号信息<a class="headerlink" href="#id19" title="永久链接至标题">¶</a></h3>
<div class="section" id="id20">
<h4>修改用户名<a class="headerlink" href="#id20" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="nb">int</span> <span class="n">ChangeName</span><span class="p">(</span><span class="n">string</span> <span class="n">name</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li>参数</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="47%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">描述</th>
<th class="head">备注</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>name</td>
<td>新用户名称</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>返回值</li>
</ul>
<p>执行成功标示 0：成功 ，-1：失败</p>
<ul class="simple">
<li>通知事件</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">onChangeNameResult</span></code> 修改用户名触发此事件，事件处理是否修改成功。</p>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">accountManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">AccountManager</span><span class="p">;</span>
<span class="n">var</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">accountManager</span><span class="o">.</span><span class="n">ChangeName</span><span class="p">(</span><span class="s2">&quot;张三&quot;</span><span class="p">);</span>

<span class="n">_accountManager</span><span class="o">.</span><span class="n">onChangeNameResult</span> <span class="o">+=</span> <span class="n">_accountManager_onChangeNameResult</span><span class="p">;</span>
<span class="n">private</span> <span class="n">void</span> <span class="n">_accountManager_onChangeNameResult</span><span class="p">(</span><span class="nb">bool</span> <span class="n">success</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="n">success</span><span class="p">){</span>
    <span class="o">//</span> <span class="n">修改成功</span>
  <span class="p">}</span><span class="k">else</span><span class="p">{</span>
    <span class="o">//</span> <span class="n">修改失败</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>​</p>
</div>
<div class="section" id="id21">
<h4>修改密码<a class="headerlink" href="#id21" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="nb">int</span> <span class="n">ChangePassword</span><span class="p">(</span><span class="n">string</span> <span class="n">oldpassword</span><span class="p">,</span> <span class="n">string</span> <span class="n">newpassword</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li>参数</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="45%" />
<col width="30%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">描述</th>
<th class="head">备注</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>oldpassword</td>
<td>旧密码</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>newpassword</td>
<td>新密码</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>返回值</li>
</ul>
<p>执行成功标示 0：成功 ，-1：失败</p>
<ul class="simple">
<li>通知事件</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">onChangePasswordResult</span></code> , 修改密码触发此事件，事件处理是否修改成功</p>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">accountManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">AccountManager</span><span class="p">;</span>
<span class="n">var</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">accountManager</span><span class="o">.</span><span class="n">ChangePassword</span><span class="p">(</span><span class="s2">&quot;123456&quot;</span><span class="p">,</span><span class="s2">&quot;qwe&quot;</span><span class="p">);</span>

<span class="n">_accountManager</span><span class="o">.</span><span class="n">onChangePasswordResult</span> <span class="o">+=</span> <span class="n">_accountManager_onChangePasswordResult</span><span class="p">;</span>
<span class="n">private</span> <span class="n">void</span> <span class="n">_accountManager_onChangePasswordResult</span><span class="p">(</span><span class="nb">bool</span> <span class="n">success</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="n">success</span><span class="p">){</span>
    <span class="o">//</span> <span class="n">修改成功</span>
  <span class="p">}</span><span class="k">else</span><span class="p">{</span>
    <span class="o">//</span> <span class="n">修改失败</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id22">
<h3>本地账号存储<a class="headerlink" href="#id22" title="永久链接至标题">¶</a></h3>
<div class="section" id="id23">
<h4>保存账号<a class="headerlink" href="#id23" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="nb">int</span> <span class="n">SaveAccount</span><span class="p">(</span><span class="n">Account</span> <span class="n">account</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li>参数</li>
</ul>
<p>传入账号实体类， 请参考 <a class="reference external" href="#account">实体类定义 -&gt; 账号实体类</a> 定义。</p>
<ul class="simple">
<li>返回值</li>
</ul>
<p>成功标示 0：成功 ，-1：失败</p>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">accountManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">AccountManager</span><span class="p">;</span>
<span class="n">var</span> <span class="n">account</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Account</span><span class="p">(</span><span class="n">Config</span><span class="o">.</span><span class="n">Account</span><span class="p">,</span> <span class="n">Config</span><span class="o">.</span><span class="n">Password</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="n">var</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">accountManager</span><span class="o">.</span><span class="n">SaveAccount</span><span class="p">(</span><span class="n">account</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="n">ret</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
  <span class="o">//</span> <span class="n">成功</span>
<span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">ret</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span>
  <span class="o">//</span> <span class="n">失败</span>
<span class="p">}</span>
</pre></div>
</div>
<p>​</p>
</div>
<div class="section" id="id24">
<h4>清空已保存账号<a class="headerlink" href="#id24" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="nb">int</span> <span class="n">ClearAccount</span><span class="p">();</span>
</pre></div>
</div>
<ul class="simple">
<li>参数</li>
</ul>
<p>无</p>
<ul class="simple">
<li>返回值</li>
</ul>
<p>成功标示 0：成功 ，-1：失败</p>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">accountManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">AccountManager</span><span class="p">;</span>
<span class="n">var</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">accountManager</span><span class="o">.</span><span class="n">ClearAccount</span><span class="p">();</span>
<span class="k">if</span><span class="p">(</span><span class="n">ret</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
  <span class="o">//</span> <span class="n">成功</span>
<span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">ret</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span>
  <span class="o">//</span> <span class="n">失败</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id25">
<h4>是否已保存账号<a class="headerlink" href="#id25" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="nb">bool</span> <span class="n">HasAccount</span><span class="p">();</span>
</pre></div>
</div>
<ul class="simple">
<li>参数</li>
</ul>
<p>无</p>
<ul class="simple">
<li>返回值</li>
</ul>
<p>成功标示 true：有 ，false：无</p>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">accountManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">AccountManager</span><span class="p">;</span>
<span class="n">var</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">accountManager</span><span class="o">.</span><span class="n">HasAccount</span><span class="p">();</span>
<span class="k">if</span><span class="p">(</span><span class="n">ret</span><span class="p">){</span>
  <span class="o">//</span> <span class="n">存在</span>
<span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">ret</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span>
  <span class="o">//</span> <span class="n">不存在</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id26">
<h4>获取已保存的账号<a class="headerlink" href="#id26" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">Account</span> <span class="n">GetSavedAccount</span><span class="p">();</span>
</pre></div>
</div>
<ul class="simple">
<li>参数</li>
</ul>
<p>无</p>
<ul class="simple">
<li>返回值</li>
</ul>
<p>返回账号实体类，请参考 <a class="reference external" href="#account">实体类定义 -&gt; 账号实体类</a> 定义。</p>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">accountManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">AccountManager</span><span class="p">;</span>
<span class="n">var</span> <span class="n">account</span> <span class="o">=</span> <span class="n">accountManager</span><span class="o">.</span><span class="n">GetSavedAccount</span><span class="p">();</span>
<span class="k">if</span><span class="p">(</span><span class="n">account</span> <span class="o">!=</span><span class="n">null</span><span class="p">){</span>
  <span class="o">//</span> <span class="n">todo</span>
<span class="p">}</span>
</pre></div>
</div>
<p>​</p>
</div>
<div class="section" id="id27">
<h4>使用已存储的账号登录<a class="headerlink" href="#id27" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span>  <span class="nb">int</span>  <span class="n">LoginWithSaved</span><span class="p">();</span>
</pre></div>
</div>
<ul class="simple">
<li>参数</li>
</ul>
<p>无</p>
<ul class="simple">
<li>返回值</li>
</ul>
<p>执行成功标示 0：成功 ，-1：失败</p>
<ul class="simple">
<li>通知事件</li>
<li><code class="docutils literal notranslate"><span class="pre">onOnlineStatusChanged</span></code> ，当用户登录成功后触发，<code class="docutils literal notranslate"><span class="pre">OnlineStatus</span></code>
状态改为 <code class="docutils literal notranslate"><span class="pre">ONLINE_STATUS_ONLINE</span></code> 参考 <a class="reference external" href="#loginStatus">通知事件 -
登录状态改变通知</a></li>
<li><code class="docutils literal notranslate"><span class="pre">OnError</span></code>，当用户登录失败时触发。参考 <a class="reference external" href="#init">配置及加载 -
初始化</a></li>
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">accountManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">AccountManager</span><span class="p">;</span>
<span class="n">accountManager</span><span class="o">.</span><span class="n">LoginWithSaved</span><span class="p">();</span>

<span class="o">///</span> <span class="o">&lt;</span><span class="n">summary</span><span class="o">&gt;</span>
<span class="o">///</span>  <span class="n">用户登录成功的通知</span>
<span class="o">///</span> <span class="o">&lt;/</span><span class="n">summary</span><span class="o">&gt;</span>
<span class="o">///</span> <span class="o">&lt;</span><span class="n">param</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;status&quot;</span><span class="o">&gt;</span>
<span class="o">///</span> <span class="n">用户在线枚举</span>
<span class="o">///</span> <span class="o">&lt;/</span><span class="n">param</span><span class="o">&gt;</span>
<span class="n">private</span> <span class="n">void</span> <span class="n">accountManager_onOnlineStatusChanged</span><span class="p">(</span><span class="n">OnlineStatus</span> <span class="n">status</span><span class="p">){</span>
  <span class="k">if</span><span class="p">(</span><span class="n">status</span> <span class="o">==</span> <span class="n">Net</span><span class="o">.</span><span class="n">OnlineStatus</span><span class="o">.</span><span class="n">ONLINE_STATUS_ONLINE</span><span class="p">)</span>
  <span class="p">{</span>
      <span class="o">//</span><span class="n">登录成功</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id28">
<h3>通知事件<a class="headerlink" href="#id28" title="永久链接至标题">¶</a></h3>
<div class="section" id="id29">
<h4>登录状态改变通知<a class="headerlink" href="#id29" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>事件定义</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">事件</span>
<span class="n">public</span> <span class="n">event</span> <span class="n">win_pfn_notify_online_status</span> <span class="n">onOnlineStatusChanged</span><span class="p">;</span>
</pre></div>
</div>
<p>​</p>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">注册事件</span>
<span class="n">_accountManager</span><span class="o">.</span><span class="n">onOnlineStatusChanged</span> <span class="o">+=</span> <span class="n">_accountManager_onOnlineStatusChanged</span><span class="p">;</span>

<span class="o">///</span> <span class="o">&lt;</span><span class="n">summary</span><span class="o">&gt;</span>
<span class="o">///</span>  <span class="n">用户登录成功的通知</span>
<span class="o">///</span> <span class="o">&lt;/</span><span class="n">summary</span><span class="o">&gt;</span>
<span class="o">///</span> <span class="o">&lt;</span><span class="n">param</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;status&quot;</span><span class="o">&gt;</span>
<span class="o">///</span> <span class="n">用户在线枚举</span> <span class="p">[]()</span>
<span class="o">///</span> <span class="o">&lt;/</span><span class="n">param</span><span class="o">&gt;</span>
<span class="n">private</span> <span class="n">void</span> <span class="n">_accountManager_onOnlineStatusChanged</span><span class="p">(</span><span class="n">OnlineStatus</span> <span class="n">status</span><span class="p">){</span>
  <span class="k">if</span><span class="p">(</span><span class="n">status</span> <span class="o">==</span> <span class="n">Net</span><span class="o">.</span><span class="n">OnlineStatus</span><span class="o">.</span><span class="n">ONLINE_STATUS_ONLINE</span><span class="p">)</span>
  <span class="p">{</span>
      <span class="o">//</span><span class="n">登录成功</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>参考： <a class="reference external" href="#onlineStatus">常用枚举 -&gt; 在线状态</a></p>
</div>
<div class="section" id="id30">
<h4>修改用户通知<a class="headerlink" href="#id30" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>事件定义</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">event</span> <span class="n">win_pfn_notify_change_name</span> <span class="n">onChangeNameResult</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">accountManager</span><span class="o">.</span><span class="n">onChangeNameResult</span> <span class="o">+=</span> <span class="n">accountManager_onChangeNameResult</span><span class="p">;</span>
<span class="n">private</span> <span class="n">void</span> <span class="n">accountManager_onChangeNameResult</span><span class="p">(</span><span class="nb">bool</span> <span class="n">success</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">success</span><span class="p">){</span>
      <span class="o">//</span> <span class="n">成功</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="o">//</span> <span class="n">失败</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>​</p>
</div>
<div class="section" id="id31">
<h4>修改密码通知<a class="headerlink" href="#id31" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>事件定义</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">event</span> <span class="n">win_pfn_notify_change_password</span> <span class="n">onChangePasswordResult</span><span class="p">;</span>
</pre></div>
</div>
<p>​</p>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">accountManager</span><span class="o">.</span><span class="n">onChangePasswordResult</span> <span class="o">+=</span> <span class="n">_accountManager_onChangePasswordResult</span><span class="p">;</span>
<span class="n">private</span> <span class="n">void</span> <span class="n">accountManager_onChangePasswordResult</span><span class="p">(</span><span class="nb">bool</span> <span class="n">success</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">success</span><span class="p">){</span>
      <span class="o">//</span> <span class="n">成功</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="o">//</span> <span class="n">失败</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id32">
<h4>当前用户遥开遥闭状态通知<a class="headerlink" href="#id32" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>事件定义</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">event</span> <span class="n">win_pfn_notify_audio_enable</span> <span class="n">onAudioEnableChanged</span><span class="p">;</span>
</pre></div>
</div>
<p>​</p>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">accountManager</span><span class="o">.</span><span class="n">onAudioEnableChanged</span> <span class="o">+=</span> <span class="n">_accountManager_onAudioEnableChanged</span><span class="p">;</span>
<span class="n">private</span> <span class="n">void</span> <span class="n">_accountManager_onAudioEnableChanged</span><span class="p">(</span><span class="nb">bool</span> <span class="n">audioEnable</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="n">audioEnable</span><span class="p">){</span>
    <span class="o">//</span> <span class="n">遥开</span>
  <span class="p">}</span><span class="k">else</span><span class="p">{</span>
    <span class="o">//</span> <span class="n">遥闭</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id33">
<h4>注册监听用户状态变化<a class="headerlink" href="#id33" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>被动触发条件 echat 服务内部 User
缓存变更时触发，例如用户状态改变或用户名改变。</li>
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">groupManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">GroupManager</span><span class="p">;</span>
<span class="n">groupManager</span><span class="o">.</span><span class="n">onUserChanged</span> <span class="o">+=</span> <span class="n">_groupManager_onUserChanged</span><span class="p">;</span>

<span class="n">void</span> <span class="n">groupManager_onUserChanged</span><span class="p">(</span><span class="nb">int</span> <span class="n">count</span><span class="p">,</span> <span class="n">Net</span><span class="o">.</span><span class="n">User</span><span class="p">[]</span> <span class="n">users</span><span class="p">)</span>
<span class="p">{</span>
   <span class="n">Console</span><span class="o">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s2">&quot;有</span><span class="si">{0}</span><span class="s2">个用户状态更新了，我是否需要？&quot;</span><span class="p">,</span><span class="n">count</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id34">
<h2>群组<a class="headerlink" href="#id34" title="永久链接至标题">¶</a></h2>
<div class="section" id="id35">
<h3>加入群组<a class="headerlink" href="#id35" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="nb">int</span> <span class="n">JoinGroup</span><span class="p">(</span><span class="nb">int</span> <span class="n">gid</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li>参数</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="38%" />
<col width="31%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">描述</th>
<th class="head">备注</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>gid</td>
<td>群组Id</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>返回值</li>
</ul>
<p>执行成功标示 0：成功 ，-1：失败</p>
<ul class="simple">
<li>通知事件</li>
</ul>
<p>见 <a class="reference external" href="#groupEvent">通知事件</a></p>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span>var groupManager = EChat.Net.EChatApi.Instance.GroupManager;
int result = groupManager.JoinGroup(gid);
if( result == 0){
  // 执行成功，当前群组切换通知
}
</pre></div>
</div>
<p>​</p>
</div>
<div class="section" id="id36">
<h3>离开群组<a class="headerlink" href="#id36" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="nb">int</span> <span class="n">LeaveGroup</span><span class="p">();</span>
</pre></div>
</div>
<ul class="simple">
<li>参数</li>
</ul>
<p>无</p>
<ul class="simple">
<li>返回值</li>
</ul>
<p>执行成功标示 0：成功 ，-1：失败</p>
<ul class="simple">
<li>通知事件</li>
</ul>
<p>见 <a class="reference external" href="#groupEvent">通知事件</a></p>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span>var groupManager = EChat.Net.EChatApi.Instance.GroupManager;
int result = groupManager.LeaveGroup();
if( result == 0){
  // 执行成功，当前群组切换通知
}
</pre></div>
</div>
</div>
<div class="section" id="id37">
<h3>创建临时群组<a class="headerlink" href="#id37" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span>public int Call(long[] uids)；
</pre></div>
</div>
<ul class="simple">
<li>参数</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="50%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">描述</th>
<th class="head">备注</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>uids</td>
<td>用户uid 数组</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>返回值</li>
</ul>
<p>执行成功标示 0：成功 ，-1：失败</p>
<ul class="simple">
<li>通知事件</li>
</ul>
<p>见 <a class="reference external" href="#groupEvent">通知事件</a></p>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">groupManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">GroupManager</span><span class="p">;</span>
<span class="nb">int</span><span class="p">[]</span> <span class="n">uids</span> <span class="o">=</span> <span class="n">new</span><span class="p">[]</span> <span class="p">{</span> <span class="mi">1</span><span class="p">,</span><span class="mi">2</span> <span class="p">};</span>
<span class="n">groupManager</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">uids</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id38">
<h3>销毁临时群组<a class="headerlink" href="#id38" title="永久链接至标题">¶</a></h3>
<p>临时群组创建者退出临时群组即为销毁临时群组。</p>
</div>
<div class="section" id="id39">
<h3>群组信息查询<a class="headerlink" href="#id39" title="永久链接至标题">¶</a></h3>
<div class="section" id="id40">
<h4>获取群组列表<a class="headerlink" href="#id40" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">Group</span><span class="p">[]</span> <span class="n">GetGroupList</span><span class="p">();</span>
</pre></div>
</div>
<ul class="simple">
<li>参数</li>
</ul>
<p>无</p>
<ul class="simple">
<li>返回值</li>
</ul>
<p><a class="reference external" href="#group">Group 实体数组</a></p>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">groupManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">GroupManager</span><span class="p">;</span>
<span class="n">var</span> <span class="n">groups</span> <span class="o">=</span> <span class="n">groupManager</span><span class="o">.</span><span class="n">GetGroupList</span><span class="p">();</span>
</pre></div>
</div>
<p>​</p>
</div>
<div class="section" id="gid">
<h4>根据GID 查询群组信息<a class="headerlink" href="#gid" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">Group</span> <span class="n">GetGroupByGid</span><span class="p">(</span><span class="nb">int</span> <span class="n">gid</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li>参数</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="38%" />
<col width="31%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">描述</th>
<th class="head">备注</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>gid</td>
<td>群组Id</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>返回值</li>
</ul>
<p>群组实体</p>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">groupManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">GroupManager</span><span class="p">;</span>
<span class="n">var</span> <span class="n">group</span> <span class="o">=</span> <span class="n">groupManager</span><span class="o">.</span><span class="n">GetGroupByGid</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id">
<h4>获取当前群组所在Id<a class="headerlink" href="#id" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="nb">int</span> <span class="n">GetCurrentGroup</span><span class="p">();</span>
</pre></div>
</div>
<ul class="simple">
<li>参数</li>
</ul>
<p>无</p>
<ul class="simple">
<li>返回值</li>
</ul>
<p>当前群组 Id</p>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">groupManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">GroupManager</span><span class="p">;</span>
<span class="n">var</span> <span class="n">gid</span> <span class="o">=</span> <span class="n">groupManager</span><span class="o">.</span><span class="n">GetCurrentGroup</span><span class="p">();</span>
</pre></div>
</div>
<p>​</p>
</div>
<div class="section" id="id41">
<h4>获取成员列表<a class="headerlink" href="#id41" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">Member</span><span class="p">[]</span> <span class="n">GetMemberList</span><span class="p">(</span><span class="nb">int</span> <span class="n">gid</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>参数</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="38%" />
<col width="31%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">描述</th>
<th class="head">备注</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>gid</td>
<td>群组Id</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>返回值</li>
</ul>
<p>见 <a class="reference external" href="#member">成员实体</a></p>
</div>
</div>
<div class="section" id="id42">
<h3>群组设置<a class="headerlink" href="#id42" title="永久链接至标题">¶</a></h3>
<div class="section" id="id43">
<h4>监听群组<a class="headerlink" href="#id43" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="nb">int</span> <span class="n">StartWatchGroup</span><span class="p">(</span><span class="nb">int</span> <span class="n">gid</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li>参数</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="38%" />
<col width="31%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">描述</th>
<th class="head">备注</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>gid</td>
<td>群组Id</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>返回值</li>
</ul>
<p>成功标示 0：成功 ，-1：失败</p>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">groupManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">GroupManager</span><span class="p">;</span>
<span class="n">var</span> <span class="k">return</span>  <span class="o">=</span> <span class="n">groupManager</span><span class="o">.</span><span class="n">StopWatchGroup</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="k">return</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
    <span class="o">//</span> <span class="n">TODO</span> <span class="n">成功监听</span>
<span class="p">}</span>
</pre></div>
</div>
<p>​</p>
<p>​</p>
</div>
<div class="section" id="id44">
<h4>取消监听群组<a class="headerlink" href="#id44" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">Group</span> <span class="n">StopWatchGroup</span><span class="p">(</span><span class="nb">int</span> <span class="n">gid</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li>参数</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="38%" />
<col width="31%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">描述</th>
<th class="head">备注</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>gid</td>
<td>群组Id</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>返回值</li>
</ul>
<p>见 <a class="reference external" href="#group">群组实体</a></p>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">groupManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">GroupManager</span><span class="p">;</span>
<span class="n">var</span> <span class="n">group</span> <span class="o">=</span> <span class="n">groupManager</span><span class="o">.</span><span class="n">StopWatchGroup</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="n">group</span> <span class="o">!=</span><span class="n">null</span><span class="p">){</span>
    <span class="n">Console</span><span class="o">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s2">&quot; gid ：</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="p">,</span><span class="n">group</span><span class="o">.</span><span class="n">gid</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>​</p>
<hr class="docutils" />
<div id="groupEvent"></div><p>通知事件</p>
</div>
<div class="section" id="id45">
<h4>群组变化事件<a class="headerlink" href="#id45" title="永久链接至标题">¶</a></h4>
<p><strong>被动触发</strong></p>
<ul class="simple">
<li>其他成员进入所在的组时</li>
<li>其他成员在自身所在的组下线时</li>
<li>切换群组时</li>
</ul>
<p><strong>主动触发</strong></p>
<ul class="simple">
<li>进组</li>
<li>创建临时组</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span>//当前所在群组变化通知
//public event win_pfn_notify_current_group onCurrentGroup;

//群组列表发生变化通知
//public event win_pfn_notify_grouplist onGroupList;

//群组成员发生变化通知
//public event win_pfn_notify_members_changed onMemberChanged;

//成员列表获取完毕
//public event win_pfn_notify_memberlist onMemberList;

var groupManager = EChat.Net.EChatApi.Instance.GroupManager;
groupManager.onGroupList += groupManager_onGroupList;
groupManager.onCurrentGroup += groupManager_onCurrentGroup;
groupManager.onMemberChanged += groupManager_onMemberChanged;
groupManager.onMemberList += groupManager_onMemberList;

void groupManager_onCurrentGroup(int gid, string group_name)
{
    // 更新当前成员列表
}

void groupManager_onGroupList()
{
    // 刷新群组列表
}
void groupManager_onMemberChanged(int gid, int[] us, int uc, int[] rs, int rc, int[] js, int jc, int[] ls, int lc)
{
  //增量更新成员列表
  // us 新加入当前群组人员id， 调度台强拆动作
  // rs 退出当前群组人员id， 调度台强拉动作
  // js 进入当前群组人员 id
  // ls 离开当前群组人员id
}

void groupManager_onMemberList(int gid)
{
 //更新成员列表
}
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id46">
<h2>对讲<a class="headerlink" href="#id46" title="永久链接至标题">¶</a></h2>
<div class="section" id="id47">
<h3>抢麦 - 获取话权<a class="headerlink" href="#id47" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="nb">int</span> <span class="n">StartSpeak</span><span class="p">();</span>
</pre></div>
</div>
<ul class="simple">
<li>参数</li>
</ul>
<p>无</p>
<ul class="simple">
<li>返回值</li>
</ul>
<p>执行成功标示 0：成功 ，-1：失败</p>
<ul class="simple">
<li>通知事件</li>
</ul>
<p>见 <a class="reference external" href="#startSpeak">抢麦通知</a></p>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">talkManager</span> <span class="o">=</span> <span class="n">EChatApi</span><span class="o">.</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">.</span><span class="n">TalkManager</span><span class="p">;</span>
<span class="n">talkManager</span><span class="o">.</span><span class="n">onStartSpeak</span> <span class="o">+=</span> <span class="n">_talkManager_onStartSpeak</span><span class="p">;</span>
<span class="n">talkManger</span><span class="o">.</span><span class="n">StartSpeak</span><span class="p">();</span>

<span class="n">private</span> <span class="n">void</span> <span class="n">_talkManager_onStartSpeak</span><span class="p">(</span><span class="nb">int</span> <span class="n">gid</span><span class="p">,</span> <span class="n">string</span> <span class="n">group_name</span><span class="p">)</span>
<span class="p">{</span>
    <span class="o">//</span><span class="n">TODO</span> <span class="n">抢到麦权</span>
<span class="p">}</span>
</pre></div>
</div>
<p>​</p>
</div>
<div class="section" id="id48">
<h3>放麦 - 释放话权<a class="headerlink" href="#id48" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span>public int StopSpeak()；
</pre></div>
</div>
<ul class="simple">
<li>参数</li>
</ul>
<p>无</p>
<ul class="simple">
<li>返回值</li>
</ul>
<p>执行成功标示 0：成功 ，-1：失败</p>
<ul class="simple">
<li>通知事件</li>
</ul>
<p><a class="reference external" href="#stopSpaek">放麦通知</a></p>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">talkManager</span> <span class="o">=</span> <span class="n">EChatApi</span><span class="o">.</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">.</span><span class="n">TalkManager</span><span class="p">;</span>
<span class="n">talkManager</span><span class="o">.</span><span class="n">onStopSpeak</span> <span class="o">+=</span> <span class="n">_talkManager_onStopSpeak</span><span class="p">;</span>
<span class="n">talkManger</span><span class="o">.</span><span class="n">StopSpeak</span><span class="p">();</span>

<span class="n">private</span> <span class="n">void</span> <span class="n">_talkManager_onStopSpeak</span><span class="p">(</span><span class="nb">int</span> <span class="n">gid</span><span class="p">,</span> <span class="n">string</span> <span class="n">group_name</span><span class="p">)</span>
<span class="p">{</span>
    <span class="o">//</span><span class="n">TODO</span> <span class="n">释放麦权</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id49">
<h3>对讲信息查询<a class="headerlink" href="#id49" title="永久链接至标题">¶</a></h3>
<div class="section" id="id50">
<h4>查询当前播放语音的用户<a class="headerlink" href="#id50" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span>public User GetPlayingSoundUser()；
</pre></div>
</div>
<ul class="simple">
<li>参数</li>
</ul>
<p>无</p>
<ul class="simple">
<li>返回值</li>
</ul>
<p>见 <a class="reference external" href="#user">用户实体</a></p>
<p>​</p>
</div>
</div>
<div class="section" id="id51">
<h3>查询当前所有再讲话的用户<a class="headerlink" href="#id51" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">User</span><span class="p">[]</span> <span class="n">GetSpeakingUsers</span><span class="p">();</span>
</pre></div>
</div>
<ul class="simple">
<li>参数</li>
</ul>
<p>无</p>
<ul class="simple">
<li>返回值</li>
</ul>
<p>见 <a class="reference external" href="#user">用户实体数组</a></p>
<ul class="simple">
<li>示例</li>
</ul>
</div>
<div class="section" id="id52">
<h3>自己当前是否正在讲话<a class="headerlink" href="#id52" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="nb">bool</span> <span class="n">IsSpeaking</span><span class="p">();</span>
</pre></div>
</div>
<ul class="simple">
<li>参数</li>
</ul>
<p>无</p>
<ul class="simple">
<li>返回值</li>
</ul>
<p>成功标示 true：在说话 ，false：没有说话</p>
<p>​</p>
</div>
<div class="section" id="id53">
<h3>自己当前是否正收听语音<a class="headerlink" href="#id53" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="nb">bool</span> <span class="n">IsListening</span><span class="p">();</span>
</pre></div>
</div>
<ul class="simple">
<li>参数</li>
</ul>
<p>无</p>
<ul class="simple">
<li>返回值</li>
</ul>
<p>成功标示 true：在说话 ，false：没有说话</p>
</div>
<div class="section" id="id54">
<h3>通知事件<a class="headerlink" href="#id54" title="永久链接至标题">¶</a></h3>
<hr class="docutils" />
<div id="startSpeak"></div><p>抢麦通知</p>
<ul class="simple">
<li>事件定义</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">event</span> <span class="n">win_pfn_notify_start_speak</span> <span class="n">onStartSpeak</span><span class="p">;</span>
</pre></div>
</div>
<p>​</p>
<hr class="docutils" />
<div id="stopSpeak"></div><p>放麦通知</p>
<ul class="simple">
<li>事件定义</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">event</span> <span class="n">win_pfn_notify_start_speak</span> <span class="n">onStartSpeak</span><span class="p">;</span>
</pre></div>
</div>
<p>​</p>
<ul class="simple">
<li>示例</li>
</ul>
<div class="section" id="id55">
<h4>有人讲话通知<a class="headerlink" href="#id55" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>事件定义</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">event</span> <span class="n">win_pfn_notify_start_playing_sound</span> <span class="n">onStartPlaying</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">talkManager</span> <span class="o">=</span> <span class="n">EChatApi</span><span class="o">.</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">.</span><span class="n">TalkManager</span><span class="p">;</span>
<span class="n">talkManager</span><span class="o">.</span><span class="n">onStartPlaying</span> <span class="o">+=</span> <span class="n">talkManager_onStartPlaying</span><span class="p">;</span>

<span class="n">private</span> <span class="n">void</span> <span class="n">_talkManager_onStartPlaying</span><span class="p">(</span><span class="nb">int</span> <span class="n">uid</span><span class="p">,</span> <span class="n">string</span> <span class="n">name</span><span class="p">,</span> <span class="nb">int</span> <span class="n">gid</span><span class="p">,</span> <span class="n">string</span> <span class="n">group_name</span><span class="p">)</span>
<span class="p">{</span>
    <span class="o">//</span> <span class="n">TODO</span> <span class="n">其他人讲话</span>
<span class="p">}</span>
</pre></div>
</div>
<p>​</p>
</div>
<div class="section" id="id56">
<h4>讲话停止通知<a class="headerlink" href="#id56" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>事件定义</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">event</span> <span class="n">win_pfn_notify_user_stop_speak</span> <span class="n">onUserStopSpeak</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">talkManager</span> <span class="o">=</span> <span class="n">EChatApi</span><span class="o">.</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">.</span><span class="n">TalkManager</span><span class="p">;</span>
<span class="n">talkManager</span><span class="o">.</span><span class="n">onStopPlaying</span> <span class="o">+=</span> <span class="n">talkManager_onStopPlaying</span><span class="p">;</span>

<span class="n">private</span> <span class="n">void</span> <span class="n">talkManager_onStopPlaying</span><span class="p">(</span><span class="nb">int</span> <span class="n">uid</span><span class="p">,</span> <span class="n">string</span> <span class="n">name</span><span class="p">,</span> <span class="nb">int</span> <span class="n">gid</span><span class="p">,</span> <span class="n">string</span> <span class="n">group_name</span><span class="p">)</span>
<span class="p">{</span>
   <span class="o">//</span> <span class="n">TODO</span> <span class="n">其他人停止讲话</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id57">
<h2>广播<a class="headerlink" href="#id57" title="永久链接至标题">¶</a></h2>
<div class="section" id="id58">
<h3>文字广播<a class="headerlink" href="#id58" title="永久链接至标题">¶</a></h3>
<div class="section" id="id59">
<h4>发送文字广播<a class="headerlink" href="#id59" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="nb">int</span> <span class="n">SendTextBroadcast</span><span class="p">(</span><span class="n">string</span> <span class="n">text</span><span class="p">,</span> <span class="nb">int</span><span class="p">[]</span> <span class="n">uids</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>参数描述</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="36%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数定义</th>
<th class="head">描述</th>
<th class="head">约束</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>text</td>
<td>文字信息</td>
<td>文字长度1-40；编码格式uft-8</td>
</tr>
<tr class="row-odd"><td>uids</td>
<td>收听广播的用户ID集合</td>
<td><ul class="first last simple">
<li><ul class="first">
<li></li>
</ul>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>返回值 执行标示：0【成功】 -1【失败】</li>
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">_broadcastManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">BroadcastManager</span><span class="p">;</span>
<span class="n">var</span> <span class="n">uids</span> <span class="o">=</span> <span class="n">new</span><span class="p">[]</span> <span class="p">{</span> <span class="mi">50711</span> <span class="p">};</span>
<span class="n">_broadcastManager</span><span class="o">.</span><span class="n">SendTextBroadcast</span><span class="p">(</span><span class="s2">&quot;测试文字广播&quot;</span><span class="p">,</span>  <span class="n">uids</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id60">
<h3>语音广播<a class="headerlink" href="#id60" title="永久链接至标题">¶</a></h3>
<div class="section" id="id61">
<h4>开始录制音频文件<a class="headerlink" href="#id61" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="nb">int</span> <span class="n">StartRecordBroadcastAudio</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li>返回值 执行标示：0【成功】 -1【失败】</li>
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">var</span> <span class="n">_broadcastManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">BroadcastManager</span><span class="p">;</span>
<span class="n">_broadcastManager</span><span class="o">.</span><span class="n">StartRecordBroadcastAudio</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="id62">
<h4>停止录制音频文件<a class="headerlink" href="#id62" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="nb">int</span> <span class="n">StopRecordBroadcastAudio</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li>返回值 执行标示：0【成功】 -1【失败】</li>
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">var</span> <span class="n">_broadcastManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">BroadcastManager</span><span class="p">;</span>
<span class="n">_broadcastManager</span><span class="o">.</span><span class="n">StopRecordBroadcastAudio</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="id63">
<h4>发送语音广播<a class="headerlink" href="#id63" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="nb">int</span> <span class="n">SendAudioBroadcast</span><span class="p">(</span><span class="nb">int</span><span class="p">[]</span> <span class="n">uids</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>参数描述</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="55%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数定义</th>
<th class="head">描述</th>
<th class="head">约束</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>uids</td>
<td>收听广播的用户ID集合</td>
<td><ul class="first last simple">
<li><ul class="first">
<li></li>
</ul>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>返回值 执行标示：0【成功】 -1【失败】</li>
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span> var _broadcastManager = EChat.Net.EChatApi.Instance.BroadcastManager;
 var uids = new[] { 50711 };
_broadcastManager.SendAudioBroadcast(uids)；
</pre></div>
</div>
</div>
<div class="section" id="id64">
<h4>播放已录制的待播放音频文件<a class="headerlink" href="#id64" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="nb">int</span> <span class="n">PlayRecordBroadcastAudio</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li>返回值 执行标示：0【成功】 -1【失败】</li>
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">_broadcastManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">BroadcastManager</span><span class="p">;</span>
<span class="n">_broadcastManager</span><span class="o">.</span><span class="n">PlayRecordBroadcastAudio</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id65">
<h3>事件定义<a class="headerlink" href="#id65" title="永久链接至标题">¶</a></h3>
<div class="section" id="id66">
<h4>录音结束回调<a class="headerlink" href="#id66" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>主动触发条件 执行 PlayRecordBroadcastAudio 方法</li>
<li>事件定义</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span>public event win_pfn_broadcast_play_async_stop OnPlayStop；
</pre></div>
</div>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">_broadcastManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">BroadcastManager</span><span class="p">;</span>
<span class="n">_broadcastManager</span><span class="o">.</span><span class="n">OnPlayStop</span> <span class="o">+=</span> <span class="n">_broadcastManager_OnPlayStop</span><span class="p">;</span>
<span class="n">private</span> <span class="n">void</span> <span class="n">_broadcastManager_OnPlayStop</span><span class="p">()</span>
<span class="p">{</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id67">
<h4>发送广播结果回调<a class="headerlink" href="#id67" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>主动触发条件 执行 SendAudioBroadcast 方法</li>
</ul>
<p>执行SendTextBroadcast方法</p>
<ul class="simple">
<li>事件定义</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">event</span> <span class="n">win_pfn_notify_send_callback</span> <span class="n">onSended</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">_broadcastManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">BroadcastManager</span><span class="p">;</span>
<span class="n">_broadcastManager</span><span class="o">.</span><span class="n">onSended</span> <span class="o">+=</span> <span class="n">_broadcastManager_onSended</span><span class="p">;</span>

<span class="n">private</span> <span class="n">void</span> <span class="n">_broadcastManager_onSended</span><span class="p">(</span><span class="nb">bool</span> <span class="n">success</span><span class="p">)</span>
<span class="p">{</span>
   <span class="o">//</span><span class="n">发送成功</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id68">
<h2>调度<a class="headerlink" href="#id68" title="永久链接至标题">¶</a></h2>
<div class="section" id="id69">
<h3>临时加入组<a class="headerlink" href="#id69" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="nb">int</span> <span class="n">TempJoinGroup</span><span class="p">(</span><span class="nb">int</span> <span class="n">gid</span><span class="p">,</span> <span class="nb">int</span><span class="p">[]</span> <span class="n">uids</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>参数描述</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="50%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数定义</th>
<th class="head">描述</th>
<th class="head">约束</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>gid</td>
<td>临时加入群组编号</td>
<td>–</td>
</tr>
<tr class="row-odd"><td>uids</td>
<td>用户ID集合</td>
<td>–</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>返回值 执行标示：0【成功】 -1【失败】</li>
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">_dispatchManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">DispatchManager</span><span class="p">;</span>
<span class="n">var</span> <span class="n">uids</span> <span class="o">=</span> <span class="n">new</span><span class="p">[]</span> <span class="p">{</span> <span class="mi">50711</span> <span class="p">};</span>
<span class="n">_dispatchManager</span><span class="o">.</span><span class="n">TempJoinGroup</span><span class="p">(</span><span class="mi">600612</span><span class="p">,</span> <span class="n">uids</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id70">
<h3>临时移出组<a class="headerlink" href="#id70" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="nb">int</span> <span class="n">TempLeaveGroup</span><span class="p">(</span><span class="nb">int</span> <span class="n">gid</span><span class="p">,</span> <span class="nb">int</span><span class="p">[]</span> <span class="n">uids</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>参数描述</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="38%" />
<col width="30%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数定义</th>
<th class="head">描述</th>
<th class="head">约束</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>gid</td>
<td>群组Id</td>
<td>赋值为0</td>
</tr>
<tr class="row-odd"><td>uids</td>
<td>用户ID集合</td>
<td>–</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>返回值 执行标示：0【成功】 -1【失败】</li>
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">_dispatchManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">DispatchManager</span><span class="p">;</span>
<span class="n">var</span> <span class="n">uids</span> <span class="o">=</span> <span class="n">new</span><span class="p">[]</span> <span class="p">{</span> <span class="mi">50711</span> <span class="p">};</span>
<span class="n">_dispatchManager</span><span class="o">.</span><span class="n">TempLeaveGroup</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">uids</span><span class="p">);</span>
</pre></div>
</div>
<p>​</p>
</div>
<div class="section" id="id71">
<h3>遥开遥闭<a class="headerlink" href="#id71" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="nb">int</span> <span class="n">Audioenable</span><span class="p">(</span><span class="nb">int</span><span class="p">[]</span> <span class="n">uids</span><span class="p">,</span> <span class="nb">bool</span> <span class="n">audioenabled</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>参数描述</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="50%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数定义</th>
<th class="head">描述</th>
<th class="head">约束</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>uids</td>
<td>用户ID集合</td>
<td>–</td>
</tr>
<tr class="row-odd"><td>audioenabled</td>
<td>true:开启 false:关闭</td>
<td>–</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>返回值 执行标示：0【成功】 -1【失败】</li>
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">_dispatchManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">DispatchManager</span><span class="p">;</span>
<span class="n">var</span> <span class="n">uids</span> <span class="o">=</span> <span class="n">new</span><span class="p">[]</span> <span class="p">{</span> <span class="mi">50711</span> <span class="p">};</span>
<span class="n">_dispatchManager</span><span class="o">.</span><span class="n">Audioenable</span><span class="p">(</span><span class="n">uids</span><span class="p">,</span> <span class="n">true</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id72">
<h3>强拉<a class="headerlink" href="#id72" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li>方法签名</li>
</ul>
<p>在群组列表中把在线不在本群组内的人员强拉回调度员所在群组</p>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="nb">int</span> <span class="n">ForceDispatch</span><span class="p">(</span><span class="nb">int</span><span class="p">[]</span> <span class="n">uids</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>参数描述</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="41%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数定义</th>
<th class="head">描述</th>
<th class="head">约束</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>uids</td>
<td>用户ID集合</td>
<td>–</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>返回值 执行标示：0【成功】 -1【失败】</li>
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span>var _dispatchManager = EChat.Net.EChatApi.Instance.DispatchManager;
var uids = new[] { 50711 };
_dispatchManager.ForceDispatch(uids)；
</pre></div>
</div>
<p>​</p>
</div>
<div class="section" id="id73">
<h3>强拆<a class="headerlink" href="#id73" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li>方法签名</li>
</ul>
<p>在群组列表中把正在讲话的用户强拆，强制中断其语音</p>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="nb">int</span> <span class="n">Takemic</span><span class="p">(</span><span class="nb">int</span><span class="p">[]</span> <span class="n">uids</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>参数描述</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="41%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数定义</th>
<th class="head">描述</th>
<th class="head">约束</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>uids</td>
<td>用户ID集合</td>
<td>–</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>返回值 执行成功标示：0【成功】 -1【失败】</li>
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">_dispatchManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">DispatchManager</span><span class="p">;</span>
<span class="n">var</span> <span class="n">uids</span> <span class="o">=</span> <span class="n">new</span><span class="p">[]</span> <span class="p">{</span> <span class="mi">50711</span> <span class="p">};</span>
<span class="n">_dispatchManager</span><span class="o">.</span><span class="n">Takemic</span><span class="p">(</span><span class="n">uids</span><span class="p">)</span>
</pre></div>
</div>
<p>​</p>
</div>
<div class="section" id="id74">
<h3>事件定义<a class="headerlink" href="#id74" title="永久链接至标题">¶</a></h3>
<div class="section" id="id75">
<h4>强拉结果通知事件<a class="headerlink" href="#id75" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>主动触发条件 执行ForceDispatch 方法</li>
<li>事件定义</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">event</span> <span class="n">win_pfn_notify_dispatcher</span> <span class="n">onDispatched</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">_dispatchManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">DispatchManager</span><span class="p">;</span>
<span class="n">_dispatchManager</span><span class="o">.</span><span class="n">onDispatched</span> <span class="o">+=</span> <span class="n">_dispatchManager_onDispatched</span><span class="p">;</span>

<span class="n">private</span> <span class="n">void</span> <span class="n">_dispatchManager_onDispatched</span><span class="p">(</span><span class="nb">bool</span> <span class="n">success</span><span class="p">,</span> <span class="nb">bool</span> <span class="n">has_gid</span><span class="p">,</span> <span class="nb">int</span> <span class="n">gid</span><span class="p">,</span> <span class="nb">int</span><span class="p">[]</span> <span class="n">uids</span><span class="p">,</span> <span class="nb">int</span> <span class="n">uid_size</span><span class="p">)</span>
<span class="p">{</span>
  <span class="o">//</span><span class="n">success</span><span class="p">:</span><span class="n">是否成功</span>
  <span class="o">//</span><span class="n">has_gid</span><span class="p">:</span><span class="n">是否有群组变化</span>
  <span class="o">//</span><span class="n">gid</span><span class="p">:</span><span class="n">群组编号</span>
  <span class="o">//</span><span class="n">uids</span><span class="p">:</span><span class="n">用户Id集合</span>
  <span class="o">//</span><span class="n">uid_size</span><span class="p">:</span><span class="n">用户Id的数量</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id76">
<h4>强拆结果通知事件<a class="headerlink" href="#id76" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>主动触发条件 执行 Takemic 方法</li>
<li>事件定义</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">event</span> <span class="n">win_pfn_notify_takemic</span> <span class="n">onTakeMic</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">_dispatchManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">DispatchManager</span><span class="p">;</span>
<span class="n">_dispatchManager</span><span class="o">.</span><span class="n">onTakeMic</span> <span class="o">+=</span> <span class="n">_dispatchManager_onTakeMic</span><span class="p">;</span>

<span class="n">public</span> <span class="n">delegate</span> <span class="n">void</span> <span class="n">win_pfn_notify_takemic</span><span class="p">(</span><span class="nb">bool</span> <span class="n">success</span><span class="p">,</span> <span class="nb">int</span><span class="p">[]</span> <span class="n">uids</span><span class="p">,</span> <span class="nb">int</span> <span class="n">uids_size</span><span class="p">)</span>
<span class="p">{</span>
  <span class="o">//</span> <span class="n">success</span>  <span class="n">是否成功</span>
  <span class="o">//</span> <span class="n">uids</span>     <span class="n">用户Id集合</span>
  <span class="o">//</span><span class="n">user_size</span> <span class="n">用户Id数量</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id77">
<h4>遥开遥闭结果通知事件<a class="headerlink" href="#id77" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>主动触发条件 执行 Audioenable方法</li>
<li>事件定义</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">event</span> <span class="n">win_pfn_audio_enabled_callback</span> <span class="n">onAudioEnabled</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">_dispatchManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">DispatchManager</span><span class="p">;</span>
<span class="n">_dispatchManager</span><span class="o">.</span><span class="n">onAudioEnabled</span> <span class="o">+=</span> <span class="n">_dispatchManager_onAudioEnabled</span><span class="p">;</span>
<span class="n">public</span> <span class="n">delegate</span> <span class="n">void</span> <span class="n">win_pfn_audio_enabled_callback</span><span class="p">(</span><span class="nb">bool</span> <span class="n">success</span><span class="p">,</span> <span class="nb">bool</span> <span class="n">audio_enabled</span><span class="p">,</span> <span class="nb">int</span><span class="p">[]</span> <span class="n">uids</span><span class="p">,</span> <span class="nb">int</span> <span class="n">size</span><span class="p">)</span>
<span class="p">{</span>
  <span class="o">//</span><span class="n">success</span>       <span class="n">是否成功</span>
  <span class="o">//</span><span class="n">audio_enabled</span> <span class="n">遥开遥闭状态</span>
  <span class="o">//</span><span class="n">uids</span>          <span class="n">用户Id集合</span>
  <span class="o">//</span><span class="n">size</span>          <span class="n">用户Id数量</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id78">
<h2>本地录音<a class="headerlink" href="#id78" title="永久链接至标题">¶</a></h2>
<div class="section" id="id79">
<h3>设置本地录音<a class="headerlink" href="#id79" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="nb">int</span> <span class="n">EnableLocalRecord</span><span class="p">(</span><span class="nb">bool</span> <span class="n">enable</span><span class="p">,</span> <span class="n">string</span> <span class="n">pathDir</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>参数描述</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="57%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数定义</th>
<th class="head">描述</th>
<th class="head">约束</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>enable</td>
<td>true:开启； false：关闭</td>
<td>–</td>
</tr>
<tr class="row-odd"><td>pathDir</td>
<td>本地录音文件保存的路径</td>
<td>–</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>返回值 执行标示：0【成功】 -1【失败】</li>
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">_recordManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">RecordManager</span><span class="p">;</span>
<span class="n">_recordManager</span><span class="o">.</span><span class="n">EnableLocalRecord</span><span class="p">(</span><span class="n">true</span><span class="p">,</span><span class="s2">&quot;d:</span><span class="se">\&quot;</span><span class="s2">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id80">
<h3>播放本地录音<a class="headerlink" href="#id80" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li>方法签名</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="nb">int</span> <span class="n">PlayLocalRecord</span><span class="p">(</span><span class="n">string</span> <span class="n">path</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>参数描述</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="33%" />
<col width="44%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数定义</th>
<th class="head">描述</th>
<th class="head">约束</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>path</td>
<td>文件的绝对路径</td>
<td>播放的文件格式为evrc</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>返回值 执行标示：0【成功】 -1【失败】</li>
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">_recordManager</span> <span class="o">=</span> <span class="n">EChat</span><span class="o">.</span><span class="n">Net</span><span class="o">.</span><span class="n">EChatApi</span><span class="o">.</span><span class="n">Instance</span><span class="o">.</span><span class="n">RecordManager</span><span class="p">;</span>
<span class="n">_recordManager</span><span class="o">.</span><span class="n">PlayLocalRecord</span><span class="p">(</span><span class="s2">&quot;D:</span><span class="se">\201</span><span class="s2">8_1_18_13_45_4_996_600901_50711.evrc&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>​</p>
</div>
<div class="section" id="id81">
<h3>事件定义<a class="headerlink" href="#id81" title="永久链接至标题">¶</a></h3>
<div class="section" id="id82">
<h4>开始录音的通知事件<a class="headerlink" href="#id82" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>事件定义</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">event</span> <span class="n">win_pfn_notify_start_recordfile</span> <span class="n">onStartRecord</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span>var _recordManager = EChat.Net.EChatApi.Instance.RecordManager;
_recordManager.onStartRecord += _recordManager_onStartRecord;
public delegate void win_pfn_notify_start_recordfile(int gid, int uid, string starttime, string filename)
{
  //gid       群组Id
  //uid       用户Id
  //starttime 开始时间（绝对时间）
  //filename  文件名称

  //存储当前讲话者的基本信息
  Dictionary&lt;string, object&gt; ops = new Dictionary&lt;string, object&gt;();
  ops.Add(&quot;speakername&quot;, dispatchManager.GetUser(uid).name);
  ops.Add(&quot;groupname&quot;, groupManager.GetGroupByGid(gid).name);
  ops.Add(&quot;gid&quot;, gid);
  ops.Add(&quot;uid&quot;, uid);
  ops.Add(&quot;starttime&quot;, starttime);
  ops.Add(&quot;filename&quot;, filename);
  MimiCache.LOCAL_RECORDS.Add(filename, ops);
}
</pre></div>
</div>
</div>
<div class="section" id="id83">
<h4>结束录音的通知事件<a class="headerlink" href="#id83" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>事件定义</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">event</span> <span class="n">win_pfn_notify_end_recordfile</span> <span class="n">onStopRecord</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li>示例</li>
</ul>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span>var _recordManager = EChat.Net.EChatApi.Instance.RecordManager;
_recordManager.onStopRecord += _recordManager_onStopRecord;
private void _recordManager_onStopRecord(bool success, int gid, int uid, string finishtime, string filename)
{
  //success 是否成功
  //git     群组ID
  //uid     用户ID
  //finishtime 结束时间（绝对时间）
  //文件名称

  //将录音成功的基本信息存储到队列中
}
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="id84">
<h1>数据结构定义<a class="headerlink" href="#id84" title="永久链接至标题">¶</a></h1>
<div class="section" id="id85">
<h2>账号信息<a class="headerlink" href="#id85" title="永久链接至标题">¶</a></h2>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span>public struct Account
{
       /// &lt;summary&gt;
       /// 登录名
       /// &lt;/summary&gt;
       public string Name

       /// &lt;summary&gt;
       /// 密码
       /// &lt;/summary&gt;
       public string Password

       /// &lt;summary&gt;
       /// 用户角色
       /// 0：对讲用户 3：调度员
       /// &lt;/summary&gt;
       public int Role

       /// &lt;summary&gt;
       /// 是否自动登录
       /// &lt;/summary&gt;
       public int IsAutoLogin

       /// &lt;summary&gt;
       /// 是否记住密码
       /// &lt;/summary&gt;
       public int IsRemembered
}
</pre></div>
</div>
</div>
<div class="section" id="id86">
<h2>群组信息<a class="headerlink" href="#id86" title="永久链接至标题">¶</a></h2>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span> public struct Group
   {
    /// &lt;summary&gt;
    /// 群组类型：1为普通组，2为临时组，3为紧急组
    /// &lt;/summary&gt;
    public int type;

    /// &lt;summary&gt;
    /// 群组编号
    /// &lt;/summary&gt;
    public UInt32 gid;

    /// &lt;summary&gt;
    /// 群组名称
    /// &lt;/summary&gt;
    public string name;

    /// &lt;summary&gt;
    /// 群组优先级
    /// &lt;/summary&gt;
    public int prior;

    /// &lt;summary&gt;
    /// 服务IP
    /// &lt;/summary&gt;
    public UInt32 ip;

    /// &lt;summary&gt;
    /// 服务端口
    /// &lt;/summary&gt;
    public UInt16 port;
}
</pre></div>
</div>
</div>
<div class="section" id="id87">
<h2>用户信息<a class="headerlink" href="#id87" title="永久链接至标题">¶</a></h2>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span>public struct User
{
  /// &lt;summary&gt;
  /// 所在群组的编号
  /// &lt;/summary&gt;
  public UInt32 gid;

  /// &lt;summary&gt;
  /// 用户编号
  /// &lt;/summary&gt;
  public UInt32 uid;

  /// &lt;summary&gt;
  /// 用户角色 0：对讲用户 3：调度员
  /// &lt;/summary&gt;

  public UInt32 role;
  /// &lt;summary&gt;
  /// 在线状态
  /// &lt;/summary&gt;
  public int online;

  /// &lt;summary&gt;
  /// 是否有群组编号
  /// &lt;/summary&gt;
  public int has_gid;

  /// &lt;summary&gt;
  /// 是否有角色
  /// &lt;/summary&gt;
  public int has_role;

  /// &lt;summary&gt;
  /// 语音状态是否打开
  /// &lt;/summary&gt;
  public int audio_enabled;

  /// &lt;summary&gt;
  /// 成员名称
  /// &lt;/summary&gt;
  public string name;
}
</pre></div>
</div>
</div>
<div class="section" id="id88">
<h2>成员信息<a class="headerlink" href="#id88" title="永久链接至标题">¶</a></h2>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">struct</span> <span class="n">Member</span>
<span class="p">{</span>
    <span class="o">///</span> <span class="o">&lt;</span><span class="n">summary</span><span class="o">&gt;</span>
    <span class="o">///</span> <span class="n">所在群组的编号</span>
    <span class="o">///</span> <span class="o">&lt;/</span><span class="n">summary</span><span class="o">&gt;</span>
    <span class="n">public</span> <span class="n">UInt32</span> <span class="n">gid</span><span class="p">;</span>

    <span class="o">///</span> <span class="o">&lt;</span><span class="n">summary</span><span class="o">&gt;</span>
    <span class="o">///</span> <span class="n">用户编号</span>
    <span class="o">///</span> <span class="o">&lt;/</span><span class="n">summary</span><span class="o">&gt;</span>
    <span class="n">public</span> <span class="n">UInt32</span> <span class="n">uid</span><span class="p">;</span>

    <span class="o">///</span> <span class="o">&lt;</span><span class="n">summary</span><span class="o">&gt;</span>
    <span class="o">///</span> <span class="n">用户角色</span>
    <span class="o">///</span> <span class="o">&lt;/</span><span class="n">summary</span><span class="o">&gt;</span>
    <span class="n">public</span> <span class="n">UInt32</span> <span class="n">role</span><span class="p">;</span>

    <span class="o">///</span> <span class="o">&lt;</span><span class="n">summary</span><span class="o">&gt;</span>
    <span class="o">///</span> <span class="n">在线状态</span>
    <span class="o">///</span> <span class="o">&lt;/</span><span class="n">summary</span><span class="o">&gt;</span>
    <span class="n">public</span> <span class="nb">int</span> <span class="n">online</span><span class="p">;</span>

    <span class="o">///</span> <span class="o">&lt;</span><span class="n">summary</span><span class="o">&gt;</span>
    <span class="o">///</span> <span class="n">是否再组</span>
    <span class="o">///</span> <span class="o">&lt;/</span><span class="n">summary</span><span class="o">&gt;</span>
    <span class="n">public</span> <span class="nb">int</span> <span class="n">ingroup</span><span class="p">;</span>

    <span class="o">///</span> <span class="o">&lt;</span><span class="n">summary</span><span class="o">&gt;</span>
    <span class="o">///</span> <span class="n">是否有群组编号</span>
    <span class="o">///</span> <span class="o">&lt;/</span><span class="n">summary</span><span class="o">&gt;</span>
    <span class="n">public</span> <span class="nb">int</span> <span class="n">has_gid</span><span class="p">;</span>

    <span class="o">///</span> <span class="o">&lt;</span><span class="n">summary</span><span class="o">&gt;</span>
    <span class="o">///</span> <span class="n">是否有角色</span>
    <span class="o">///</span> <span class="o">&lt;/</span><span class="n">summary</span><span class="o">&gt;</span>
    <span class="n">public</span> <span class="nb">int</span> <span class="n">has_role</span><span class="p">;</span>

    <span class="o">///</span> <span class="o">&lt;</span><span class="n">summary</span><span class="o">&gt;</span>
    <span class="o">///</span> <span class="n">语音状态是否打开</span>
    <span class="o">///</span> <span class="o">&lt;/</span><span class="n">summary</span><span class="o">&gt;</span>
    <span class="n">public</span> <span class="nb">int</span> <span class="n">audio_enabled</span><span class="p">;</span>

    <span class="o">///</span> <span class="o">&lt;</span><span class="n">summary</span><span class="o">&gt;</span>
    <span class="o">///</span> <span class="n">成员名称</span>
    <span class="o">///</span> <span class="o">&lt;/</span><span class="n">summary</span><span class="o">&gt;</span>
    <span class="n">public</span> <span class="n">string</span> <span class="n">name</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id89">
<h1>数据定义<a class="headerlink" href="#id89" title="永久链接至标题">¶</a></h1>
<div class="section" id="id90">
<h2>登录错误码<a class="headerlink" href="#id90" title="永久链接至标题">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>-1：帐号密码错误
-2：帐号已欠费或已超出服务期
-3：帐号不存在
-4：无效的帐号登录权限
-10：帐号已在其他位置登录
-11：帐号登录超时
-20：网络连接失败
-21：网络正在重连
-30：加入群组失败
-31：加入群组请求超时
-40:当前有人正在讲话&lt;服务器回馈&gt;
-41：短时间内不允许多次抢麦
-42：摇闭状态不允许抢麦
-43：内部会话状态错误&lt;主动放麦后立马去抢麦&gt;
-44：抢麦时申请音频焦点失败
-45：已较低的优先级抢麦&lt;出现在当时正在有人讲话，自身比讲话人优先级低时&gt;
-46：网络不稳定
-50：打开录音设备失败
</pre></div>
</div>
</div>
<div class="section" id="id91">
<h2>接口调用返回值<a class="headerlink" href="#id91" title="永久链接至标题">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>-1：操作失败
 0：操作成功
</pre></div>
</div>
</div>
<div class="section" id="id92">
<h2>用户在线状态<a class="headerlink" href="#id92" title="永久链接至标题">¶</a></h2>
<div class="code c# highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">enum</span> <span class="n">OnlineStatus</span>
<span class="p">{</span>
    <span class="o">///</span> <span class="o">&lt;</span><span class="n">summary</span><span class="o">&gt;</span>
    <span class="o">///</span> <span class="n">未知状态</span>
    <span class="o">///</span> <span class="o">&lt;/</span><span class="n">summary</span><span class="o">&gt;</span>
    <span class="n">ONLINE_STATUS_UNKNOWN</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="o">///</span> <span class="o">&lt;</span><span class="n">summary</span><span class="o">&gt;</span>
    <span class="o">///</span> <span class="n">离线状态</span>
    <span class="o">///</span> <span class="o">&lt;/</span><span class="n">summary</span><span class="o">&gt;</span>
    <span class="n">ONLINE_STATUS_OFFLINE</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="o">///</span> <span class="o">&lt;</span><span class="n">summary</span><span class="o">&gt;</span>
    <span class="o">///</span> <span class="n">登录中</span>
    <span class="o">///</span> <span class="o">&lt;/</span><span class="n">summary</span><span class="o">&gt;</span>
    <span class="n">ONLINE_STATUS_LOGINING</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="o">///</span> <span class="o">&lt;</span><span class="n">summary</span><span class="o">&gt;</span>
    <span class="o">///</span> <span class="n">在线状态</span>
    <span class="o">///</span> <span class="o">&lt;/</span><span class="n">summary</span><span class="o">&gt;</span>
    <span class="n">ONLINE_STATUS_ONLINE</span> <span class="o">=</span> <span class="mi">3</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">內容目录</a></h3>
  <ul>
<li><a class="reference internal" href="#">概述</a><ul>
<li><a class="reference internal" href="#id2">安装</a><ul>
<li><a class="reference internal" href="#id5">文件目录</a></li>
<li><a class="reference internal" href="#id6">依赖库文件</a></li>
<li><a class="reference internal" href="#id7">其他</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id8">初始化</a><ul>
<li><a class="reference internal" href="#id9">初始化配置</a></li>
<li><a class="reference internal" href="#dll">初始化DLL加载</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id10">接口定义</a><ul>
<li><a class="reference internal" href="#id11">账号管理</a><ul>
<li><a class="reference internal" href="#id12">登录</a></li>
<li><a class="reference internal" href="#id13">注销</a></li>
<li><a class="reference internal" href="#id14">账号信息查询</a><ul>
<li><a class="reference internal" href="#id15">获取用户信息</a></li>
<li><a class="reference internal" href="#id16">获取在线状态</a></li>
<li><a class="reference internal" href="#uid">获取当前账号UID</a></li>
<li><a class="reference internal" href="#id17">获取用户名</a></li>
<li><a class="reference internal" href="#id18">是否被禁言状</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id19">更改账号信息</a><ul>
<li><a class="reference internal" href="#id20">修改用户名</a></li>
<li><a class="reference internal" href="#id21">修改密码</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id22">本地账号存储</a><ul>
<li><a class="reference internal" href="#id23">保存账号</a></li>
<li><a class="reference internal" href="#id24">清空已保存账号</a></li>
<li><a class="reference internal" href="#id25">是否已保存账号</a></li>
<li><a class="reference internal" href="#id26">获取已保存的账号</a></li>
<li><a class="reference internal" href="#id27">使用已存储的账号登录</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id28">通知事件</a><ul>
<li><a class="reference internal" href="#id29">登录状态改变通知</a></li>
<li><a class="reference internal" href="#id30">修改用户通知</a></li>
<li><a class="reference internal" href="#id31">修改密码通知</a></li>
<li><a class="reference internal" href="#id32">当前用户遥开遥闭状态通知</a></li>
<li><a class="reference internal" href="#id33">注册监听用户状态变化</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id34">群组</a><ul>
<li><a class="reference internal" href="#id35">加入群组</a></li>
<li><a class="reference internal" href="#id36">离开群组</a></li>
<li><a class="reference internal" href="#id37">创建临时群组</a></li>
<li><a class="reference internal" href="#id38">销毁临时群组</a></li>
<li><a class="reference internal" href="#id39">群组信息查询</a><ul>
<li><a class="reference internal" href="#id40">获取群组列表</a></li>
<li><a class="reference internal" href="#gid">根据GID 查询群组信息</a></li>
<li><a class="reference internal" href="#id">获取当前群组所在Id</a></li>
<li><a class="reference internal" href="#id41">获取成员列表</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id42">群组设置</a><ul>
<li><a class="reference internal" href="#id43">监听群组</a></li>
<li><a class="reference internal" href="#id44">取消监听群组</a></li>
<li><a class="reference internal" href="#id45">群组变化事件</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id46">对讲</a><ul>
<li><a class="reference internal" href="#id47">抢麦 - 获取话权</a></li>
<li><a class="reference internal" href="#id48">放麦 - 释放话权</a></li>
<li><a class="reference internal" href="#id49">对讲信息查询</a><ul>
<li><a class="reference internal" href="#id50">查询当前播放语音的用户</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id51">查询当前所有再讲话的用户</a></li>
<li><a class="reference internal" href="#id52">自己当前是否正在讲话</a></li>
<li><a class="reference internal" href="#id53">自己当前是否正收听语音</a></li>
<li><a class="reference internal" href="#id54">通知事件</a><ul>
<li><a class="reference internal" href="#id55">有人讲话通知</a></li>
<li><a class="reference internal" href="#id56">讲话停止通知</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id57">广播</a><ul>
<li><a class="reference internal" href="#id58">文字广播</a><ul>
<li><a class="reference internal" href="#id59">发送文字广播</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id60">语音广播</a><ul>
<li><a class="reference internal" href="#id61">开始录制音频文件</a></li>
<li><a class="reference internal" href="#id62">停止录制音频文件</a></li>
<li><a class="reference internal" href="#id63">发送语音广播</a></li>
<li><a class="reference internal" href="#id64">播放已录制的待播放音频文件</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id65">事件定义</a><ul>
<li><a class="reference internal" href="#id66">录音结束回调</a></li>
<li><a class="reference internal" href="#id67">发送广播结果回调</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id68">调度</a><ul>
<li><a class="reference internal" href="#id69">临时加入组</a></li>
<li><a class="reference internal" href="#id70">临时移出组</a></li>
<li><a class="reference internal" href="#id71">遥开遥闭</a></li>
<li><a class="reference internal" href="#id72">强拉</a></li>
<li><a class="reference internal" href="#id73">强拆</a></li>
<li><a class="reference internal" href="#id74">事件定义</a><ul>
<li><a class="reference internal" href="#id75">强拉结果通知事件</a></li>
<li><a class="reference internal" href="#id76">强拆结果通知事件</a></li>
<li><a class="reference internal" href="#id77">遥开遥闭结果通知事件</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id78">本地录音</a><ul>
<li><a class="reference internal" href="#id79">设置本地录音</a></li>
<li><a class="reference internal" href="#id80">播放本地录音</a></li>
<li><a class="reference internal" href="#id81">事件定义</a><ul>
<li><a class="reference internal" href="#id82">开始录音的通知事件</a></li>
<li><a class="reference internal" href="#id83">结束录音的通知事件</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id84">数据结构定义</a><ul>
<li><a class="reference internal" href="#id85">账号信息</a></li>
<li><a class="reference internal" href="#id86">群组信息</a></li>
<li><a class="reference internal" href="#id87">用户信息</a></li>
<li><a class="reference internal" href="#id88">成员信息</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id89">数据定义</a><ul>
<li><a class="reference internal" href="#id90">登录错误码</a></li>
<li><a class="reference internal" href="#id91">接口调用返回值</a></li>
<li><a class="reference internal" href="#id92">用户在线状态</a></li>
</ul>
</li>
</ul>

  <h4>上一个主题</h4>
  <p class="topless"><a href="c_win.html"
                        title="上一章">1 概述</a></p>
  <h4>下一个主题</h4>
  <p class="topless"><a href="csharp_activex.html"
                        title="下一章">安装</a></p>
  <div role="note" aria-label="source link">
    <h3>本页</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/csharp.rst.txt"
            rel="nofollow">显示源代码</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="转向" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="总目录"
             >索引</a></li>
        <li class="right" >
          <a href="csharp_activex.html" title="安装"
             >下一页</a> |</li>
        <li class="right" >
          <a href="c_win.html" title="1 概述"
             >上一页</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">善理对讲SDK alpha 文档</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; 版权所有 2018, 善理通益.
      由 <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.0 创建。
    </div>
  </body>
</html>